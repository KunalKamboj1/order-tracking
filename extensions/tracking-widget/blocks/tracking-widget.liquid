{{ 'tracking-widget.css' | asset_url | stylesheet_tag }}

<div class="order-tracking-widget" 
     style="
       background-color: {{ block.settings.background_color }};
       color: {{ block.settings.text_color }};
       text-align: {{ block.settings.text_alignment }};
       padding: {{ block.settings.widget_padding }}px;
       border-radius: {{ block.settings.border_radius }}px;
       {% if block.settings.show_border %}
         border: 1px solid {{ block.settings.border_color }};
       {% endif %}
       {% if block.settings.show_shadow %}
         box-shadow: 0 2px 8px rgba(0,0,0,0.1);
       {% endif %}
     ">
  
  {% if block.settings.show_heading %}
    <h2 style="
          font-size: {{ block.settings.heading_size }}px;
          font-weight: 600;
          margin-bottom: {{ block.settings.element_spacing }}px;
          color: {{ block.settings.text_color }};
        ">
      {{ block.settings.heading }}
    </h2>
  {% endif %}
  
  {% if block.settings.show_description %}
    <p class="widget-description" 
       style="
         font-size: {{ block.settings.text_size }}px;
         margin-bottom: {{ block.settings.element_spacing }}px;
         color: {{ block.settings.text_color }};
         opacity: 0.8;
       ">
      {{ block.settings.description }}
    </p>
  {% endif %}
  
  <form class="tracking-form" 
        style="margin-bottom: {{ block.settings.element_spacing }}px;">
    <div class="form-group">
      <input type="text" 
             id="orderNumber" 
             placeholder="{{ block.settings.input_placeholder }}" 
             style="
               width: 100%;
               padding: 12px;
               font-size: {{ block.settings.text_size }}px;
               border: 1px solid {{ block.settings.input_border_color }};
               border-radius: {{ block.settings.border_radius }}px;
               margin-bottom: {{ block.settings.element_spacing }}px;
               box-sizing: border-box;
             " 
             required>
      
      <button type="submit" 
              style="
                background-color: {{ block.settings.button_color }};
                color: {{ block.settings.button_text_color }};
                padding: 12px 24px;
                font-size: {{ block.settings.text_size }}px;
                font-weight: 500;
                border: none;
                border-radius: {{ block.settings.border_radius }}px;
                cursor: pointer;
                width: 100%;
                transition: opacity 0.2s;
              "
              onmouseover="this.style.opacity='0.9'"
              onmouseout="this.style.opacity='1'">
        {{ block.settings.button_text }}
      </button>
    </div>
  </form>
  
  <div id="tracking-results" 
       class="tracking-results" 
       style="font-size: {{ block.settings.text_size }}px;
              color: {{ block.settings.text_color }};
              margin-top: {{ block.settings.element_spacing }}px;"
       hidden>
  </div>
</div>

<script>
  window.trackingWidgetSettings = window.trackingWidgetSettings || {};
  window.trackingWidgetSettings['{{ block.id }}'] = {
    shopDomain: '{{ shop.permanent_domain }}'
  };
</script>

{{ 'tracking-widget.js' | asset_url | script_tag }}

{% schema %}
{
  "name": "Order Tracking Widget",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Track your order"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "Show heading",
      "default": true
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "info": "Optional description text below the heading",
      "default": "Enter your order number below to track your shipment status and delivery information."
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show description",
      "default": true
    },
    {
      "type": "text",
      "id": "input_placeholder",
      "label": "Input placeholder text",
      "default": "Enter your order number"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Track Order"
    },
    {
      "type": "header",
      "content": "Layout & Typography"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading font size",
      "min": 16,
      "max": 36,
      "step": 2,
      "default": 24,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Text font size",
      "min": 12,
      "max": 18,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button background color",
      "default": "#1a73e8"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#d1d5db"
    },
    {
      "type": "header",
      "content": "Spacing & Style"
    },
    {
      "type": "range",
      "id": "widget_padding",
      "label": "Widget padding",
      "min": 10,
      "max": 40,
      "step": 5,
      "default": 20,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "default": 8,
      "unit": "px"
    },
    {
      "type": "checkbox",
      "id": "show_border",
      "label": "Show border",
      "default": false
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e5e7eb"
    },
    {
      "type": "checkbox",
      "id": "show_shadow",
      "label": "Show shadow",
      "default": true
    },
    {
      "type": "range",
      "id": "element_spacing",
      "label": "Element spacing",
      "min": 5,
      "max": 25,
      "step": 2,
      "default": 15,
      "unit": "px"
    }
  ]
}
{% endschema %}